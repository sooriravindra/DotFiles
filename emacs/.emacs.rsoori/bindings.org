#+NAME: BindingsTable
|--------+------------------------------------+------------------------|
| Leader | Function                           | Text                   |
|--------+------------------------------------+------------------------|
| ;      | execute-extended-command           | M-x                    |
| /      | evil-commentary-line               | Commentary             |
| :      | pp-eval-expression                 | Evaluate expression    |
| b      |                                    | Buffer/bookmark        |
| bb     | consult-buffer                     | Switch buffer/bookmark |
| bm     | bookmark-set                       | Set bookmark           |
| bw     | kill-buffer                        | Kill buffer            |
| bn     | evil-next-buffer                   | Next buffer            |
| bp     | evil-prev-buffer                   | Previous buffer        |
| bl     | evil-switch-to-windows-last-buffer | Last buffer            |
| w      |                                    | Window                 |
| wo     | delete-other-windows               | Only window            |
| wq     | evil-quit                          | Close window           |
| ww     | evil-window-next                   | Next window            |
| wW     | evil-window-prev                   | Previous window        |
| wh     | evil-window-left                   | Window left            |
| wj     | evil-window-down                   | Window down            |
| wk     | evil-window-up                     | Window up              |
| wl     | evil-window-right                  | Window right           |
| ws     | evil-window-split                  | Horizontal split       |
| wv     | evil-window-vsplit                 | Vertical split         |
| wu     | winner-undo                        | Winner undo            |
| wU     | winner-redo                        | Winner redo            |
| g      |                                    | Git                    |
| gg     | magit-status                       | Magit status           |
| gj     | git-gutter:next-hunk               | Next git hunk          |
| gk     | git-gutter:previous-hunk           | Prev git hunk          |
| h      | rs/help                            | +Help                  |
|--------+------------------------------------+------------------------|

#+begin_src emacs-lisp :results value file :file bindings.el :var table=BindingsTable
  (let ((evilmap "")(whichkeymap ""))
    (progn
      (cl-loop for row in (cdr table)
               for desc = (nth 2 row)
               for func = (nth 1 row)
               for keys = (car row)
               do (if (eq func "")
                      (setq whichkeymap
                            (concat whichkeymap
                                    (format "\n(which-key-add-key-based-replacements \"SPC %s\" \"%s\")" keys desc)
                                    (format "\n(which-key-add-key-based-replacements \"C-SPC %s\" \"%s\")" keys desc)))
                    (setq evilmap (concat evilmap (format "\n(kbd \"<leader> %s\") '(\"%s\" . %s)" keys desc func)))))
      (concat (format "(evil-define-key nil 'global %s )\n" evilmap)
              whichkeymap)))
#+end_src

#+RESULTS:
[[file:bindings.el]]
